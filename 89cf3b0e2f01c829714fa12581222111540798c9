{
  "comments": [
    {
      "key": {
        "uuid": "ddd30d87_3a304333",
        "filename": "internal/pkg/core/device_handler.go",
        "patchSetId": 14
      },
      "lineNbr": 732,
      "author": {
        "id": 1000127
      },
      "writtenOn": "2021-04-20T00:45:39Z",
      "side": 1,
      "message": "Why are we making the assumption here that this is a reconciliation case? We also traverse this path during normal initialization of the OLT.",
      "range": {
        "startLine": 732,
        "startChar": 85,
        "endLine": 732,
        "endChar": 119
      },
      "revId": "89cf3b0e2f01c829714fa12581222111540798c9",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "29997370_aafec87e",
        "filename": "internal/pkg/core/device_handler.go",
        "patchSetId": 14
      },
      "lineNbr": 732,
      "author": {
        "id": 1000729
      },
      "writtenOn": "2021-04-20T03:25:00Z",
      "side": 1,
      "message": "Will add state check of RECONCILING if this state has to be kept , but as per discussion over gerrit raised for protos RECONCILE_FAILED state might be removed.",
      "parentUuid": "ddd30d87_3a304333",
      "range": {
        "startLine": 732,
        "startChar": 85,
        "endLine": 732,
        "endChar": 119
      },
      "revId": "89cf3b0e2f01c829714fa12581222111540798c9",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d7d4fb11_b57e44c5",
        "filename": "internal/pkg/core/device_handler.go",
        "patchSetId": 14
      },
      "lineNbr": 732,
      "author": {
        "id": 1000127
      },
      "writtenOn": "2021-04-21T02:00:50Z",
      "side": 1,
      "message": "Ok, in that case this code snippet will be removed - correct?",
      "parentUuid": "29997370_aafec87e",
      "range": {
        "startLine": 732,
        "startChar": 85,
        "endLine": 732,
        "endChar": 119
      },
      "revId": "89cf3b0e2f01c829714fa12581222111540798c9",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6fe4f9e3_d7daf450",
        "filename": "internal/pkg/core/device_handler.go",
        "patchSetId": 14
      },
      "lineNbr": 732,
      "author": {
        "id": 1000729
      },
      "writtenOn": "2021-04-21T11:21:32Z",
      "side": 1,
      "message": "yes",
      "parentUuid": "d7d4fb11_b57e44c5",
      "range": {
        "startLine": 732,
        "startChar": 85,
        "endLine": 732,
        "endChar": 119
      },
      "revId": "89cf3b0e2f01c829714fa12581222111540798c9",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3972473c_deacd0e2",
        "filename": "internal/pkg/core/device_handler.go",
        "patchSetId": 14
      },
      "lineNbr": 756,
      "author": {
        "id": 1000127
      },
      "writtenOn": "2021-04-20T00:45:39Z",
      "side": 1,
      "message": "Same comment here. Why are we making the assumption here that this is a reconciliation case?",
      "range": {
        "startLine": 756,
        "startChar": 93,
        "endLine": 756,
        "endChar": 120
      },
      "revId": "89cf3b0e2f01c829714fa12581222111540798c9",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "df4ea1c6_45e8c076",
        "filename": "internal/pkg/core/device_handler.go",
        "patchSetId": 14
      },
      "lineNbr": 756,
      "author": {
        "id": 1000729
      },
      "writtenOn": "2021-04-20T03:25:00Z",
      "side": 1,
      "message": "Will add state check of RECONCILING if this state has to be kept , but as per discussion over gerrit raised for protos RECONCILE_FAILED state might be removed.",
      "parentUuid": "3972473c_deacd0e2",
      "range": {
        "startLine": 756,
        "startChar": 93,
        "endLine": 756,
        "endChar": 120
      },
      "revId": "89cf3b0e2f01c829714fa12581222111540798c9",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "62271807_2823a03c",
        "filename": "internal/pkg/core/device_handler.go",
        "patchSetId": 14
      },
      "lineNbr": 756,
      "author": {
        "id": 1000127
      },
      "writtenOn": "2021-04-21T02:00:50Z",
      "side": 1,
      "message": "Ok, in that case this code snippet will be removed - correct?",
      "parentUuid": "df4ea1c6_45e8c076",
      "range": {
        "startLine": 756,
        "startChar": 93,
        "endLine": 756,
        "endChar": 120
      },
      "revId": "89cf3b0e2f01c829714fa12581222111540798c9",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "28fef094_21c1aeb6",
        "filename": "internal/pkg/core/device_handler.go",
        "patchSetId": 14
      },
      "lineNbr": 756,
      "author": {
        "id": 1000729
      },
      "writtenOn": "2021-04-21T11:21:32Z",
      "side": 1,
      "message": "yes",
      "parentUuid": "62271807_2823a03c",
      "range": {
        "startLine": 756,
        "startChar": 93,
        "endLine": 756,
        "endChar": 120
      },
      "revId": "89cf3b0e2f01c829714fa12581222111540798c9",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "24a05ef9_c553fa46",
        "filename": "internal/pkg/core/device_handler.go",
        "patchSetId": 14
      },
      "lineNbr": 813,
      "author": {
        "id": 1000127
      },
      "writtenOn": "2021-04-20T00:45:39Z",
      "side": 1,
      "message": "`dh.agentPreviouslyConnected` being true does not necessarily mean the OperStatus of the device is ACTIVE. The device could be disabled in which case the OperStatus may not ACTIVE afaik. Can you test with BBSIM and see the behavior.\nBasically, disable the OLT, check the OperStatus, the restart the openolt adapter and then check if the OperStatus is retained.\nYou should also do this test for reboot olt case. There are two cases for OLT reboot\n1. Reboot olt, wait for it to come back and connect to voltha and then restart adapter\n2. Reboot olt and before OLT comes back from reboot, restart adapter\nObserve the behavior in both cases and does that meet the expection.\n\nAlso another query about OperStatus. Currently we see to reconcile only Device OperStatus, but there is also port OperStatus. Do we reconcile that too (I haven\u0027t given thought on how this can be done, but just wanted to let you know in case we have not considered that).",
      "revId": "89cf3b0e2f01c829714fa12581222111540798c9",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "33eead9c_8fa48c8d",
        "filename": "internal/pkg/core/device_handler.go",
        "patchSetId": 14
      },
      "lineNbr": 813,
      "author": {
        "id": 1000729
      },
      "writtenOn": "2021-04-20T03:25:00Z",
      "side": 1,
      "message": "Yes, dh.agentPreviouslyConnected is used for the status of connection but not for the actual device status .\n\nWhat would you suggest to do to make it synchronise with the physical device state ?\nShould I do something extra or let it be as it is and let operation state to take course as per the indication ?",
      "parentUuid": "24a05ef9_c553fa46",
      "revId": "89cf3b0e2f01c829714fa12581222111540798c9",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4998d300_1d5f3e9c",
        "filename": "internal/pkg/core/device_handler.go",
        "patchSetId": 14
      },
      "lineNbr": 813,
      "author": {
        "id": 1000127
      },
      "writtenOn": "2021-04-21T02:00:50Z",
      "side": 1,
      "message": "Ok, for now, let it be as it is. But can you test this change for the scenarios I described above with BBSIM and let me know how it goes.",
      "parentUuid": "33eead9c_8fa48c8d",
      "revId": "89cf3b0e2f01c829714fa12581222111540798c9",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8b29a0b5_f622aaca",
        "filename": "internal/pkg/core/device_handler.go",
        "patchSetId": 14
      },
      "lineNbr": 813,
      "author": {
        "id": 1000729
      },
      "writtenOn": "2021-04-21T11:21:32Z",
      "side": 1,
      "message": "Sure I will give this test case a go and let you know.",
      "parentUuid": "4998d300_1d5f3e9c",
      "revId": "89cf3b0e2f01c829714fa12581222111540798c9",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cb1dfd1d_5a65c851",
        "filename": "internal/pkg/core/device_handler.go",
        "patchSetId": 14
      },
      "lineNbr": 813,
      "author": {
        "id": 1000729
      },
      "writtenOn": "2021-04-23T09:24:13Z",
      "side": 1,
      "message": "I have tested disabling olt and rebooting adapter all states remain same when checked using voltctl but after enabling olt , olt comes back to active state and but onus connect state and operstate does not updated.\n\nAs seen below:\nID                                      TYPE                 ROOT     PARENTID                                SERIALNUMBER    ADMINSTATE    OPERSTATUS    CONNECTSTATUS    REASON\na46482ca-a7f7-4f07-af61-d1dc8cf184c0    openolt              true     ca2f629c-4ac0-4942-aa93-612a5a29f708    BBSIM_OLT_10    ENABLED       ACTIVE        REACHABLE        \na0e2117b-171c-4955-8e47-02279656e956    brcm_openomci_onu    false    a46482ca-a7f7-4f07-af61-d1dc8cf184c0    BBSM000a0001    ENABLED       DISCOVERED    UNREACHABLE      stopping-openomci\n\nand while rebooting olt using voltctl and restarting adapters OperStatus are retained but again if I disable and enable olt same thing is happening .",
      "parentUuid": "8b29a0b5_f622aaca",
      "revId": "89cf3b0e2f01c829714fa12581222111540798c9",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388",
      "unresolved": true
    }
  ]
}