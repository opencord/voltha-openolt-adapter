{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "47e19e29_8c1f530d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000116
      },
      "writtenOn": "2021-11-22T18:03:56Z",
      "side": 1,
      "message": "hardware test\nfunctional tests",
      "revId": "b7cdd9d2e8560be397d56bb8094c74dbd34d9ec2",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4293eae4_fe17e3ba",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000116
      },
      "writtenOn": "2021-11-22T19:40:24Z",
      "side": 1,
      "message": "recheck",
      "revId": "b7cdd9d2e8560be397d56bb8094c74dbd34d9ec2",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "313fb604_e97a1bc5",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 1000116
      },
      "writtenOn": "2021-11-22T19:40:35Z",
      "side": 1,
      "message": "hardware test\nfunctional tests",
      "revId": "b7cdd9d2e8560be397d56bb8094c74dbd34d9ec2",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bd915b55_3210c0dd",
        "filename": "internal/pkg/core/openolt_flowmgr.go",
        "patchSetId": 2
      },
      "lineNbr": 555,
      "author": {
        "id": 1000127
      },
      "writtenOn": "2021-11-23T05:13:40Z",
      "side": 1,
      "message": "It is possible that partial set of queues are installed on the device by agent, how is the cleanup handled in that case. Also the agent never returns failure for creation of schedulers and queues - https://github.com/opencord/openolt/blob/master/agent/common/server.cc. Is there another patch expected there?",
      "revId": "b7cdd9d2e8560be397d56bb8094c74dbd34d9ec2",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "162b4e0a_fb2e9aeb",
        "filename": "internal/pkg/core/openolt_flowmgr.go",
        "patchSetId": 2
      },
      "lineNbr": 555,
      "author": {
        "id": 1000405
      },
      "writtenOn": "2021-11-23T07:23:41Z",
      "side": 1,
      "message": "Burak Gürdağ will send a patch for the agent changes that cover your questions.",
      "parentUuid": "bd915b55_3210c0dd",
      "revId": "b7cdd9d2e8560be397d56bb8094c74dbd34d9ec2",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bff23211_5391adb0",
        "filename": "internal/pkg/core/openolt_flowmgr.go",
        "patchSetId": 2
      },
      "lineNbr": 556,
      "author": {
        "id": 1000218
      },
      "writtenOn": "2021-11-23T07:50:52Z",
      "side": 1,
      "message": "Isn\u0027t it better to move this check before f.deviceHandler.Client.CreateTrafficQueues() call? Is there a meaning of calling it if there is no queues to be created ?",
      "range": {
        "startLine": 556,
        "startChar": 0,
        "endLine": 556,
        "endChar": 36
      },
      "revId": "b7cdd9d2e8560be397d56bb8094c74dbd34d9ec2",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d8e246e1_8493990d",
        "filename": "internal/pkg/core/openolt_flowmgr.go",
        "patchSetId": 2
      },
      "lineNbr": 556,
      "author": {
        "id": 1000405
      },
      "writtenOn": "2021-11-23T08:24:23Z",
      "side": 1,
      "message": "There always will be at least a queue to be created if we come to this line. What I\u0027m trying to do here is:\nif we send multiple queue definitions in a CreateQueues request (i.e, in the 1tcont-4gem model, we send four queue definitions in one CreateQueue request), and if we receive an error from this call, we don\u0027t know which queue definition is incorrect. We just receive an error for the entire request. So, we need to send a RemoveQueue request for all queues. The agent should remove the created ones and return ok if a queue does not exist. But if we send only one queue definition in a CreateQueue request (i.e., in the 1tcont-1gem model, we send only one queue definition in a request), and if we receive an error from this call, we know that the specific queue fails. So, we don\u0027t need to send a RemoveQueues request again. -- I call CreateQueues for all cases, and if I receive an error and the model is in 1tcont-Ngem model, I call removeQueues to rollback.\n If you ask something else, can you please give an example?",
      "parentUuid": "bff23211_5391adb0",
      "range": {
        "startLine": 556,
        "startChar": 0,
        "endLine": 556,
        "endChar": 36
      },
      "revId": "b7cdd9d2e8560be397d56bb8094c74dbd34d9ec2",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ca48a922_4d1c873c",
        "filename": "internal/pkg/core/openolt_flowmgr.go",
        "patchSetId": 2
      },
      "lineNbr": 556,
      "author": {
        "id": 1000218
      },
      "writtenOn": "2021-11-23T17:52:06Z",
      "side": 1,
      "message": "Ok. Some comment would be better here.",
      "parentUuid": "d8e246e1_8493990d",
      "range": {
        "startLine": 556,
        "startChar": 0,
        "endLine": 556,
        "endChar": 36
      },
      "revId": "b7cdd9d2e8560be397d56bb8094c74dbd34d9ec2",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e4716123_a144811d",
        "filename": "internal/pkg/core/openolt_flowmgr.go",
        "patchSetId": 2
      },
      "lineNbr": 559,
      "author": {
        "id": 1000127
      },
      "writtenOn": "2021-11-23T05:13:40Z",
      "side": 1,
      "message": "No log for else case or is it implicit?",
      "revId": "b7cdd9d2e8560be397d56bb8094c74dbd34d9ec2",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fb8022cc_3e4b2487",
        "filename": "internal/pkg/core/openolt_flowmgr.go",
        "patchSetId": 2
      },
      "lineNbr": 559,
      "author": {
        "id": 1000405
      },
      "writtenOn": "2021-11-23T07:23:41Z",
      "side": 1,
      "message": "If a queue creation that is in the 1tcont-1gem model fails, no need to send a removeQueue request - removal of the scheduler is enough. RevertScheduler method which removes the scheduler has a log (line 3516), so I didn\u0027t add a log for else case.",
      "parentUuid": "e4716123_a144811d",
      "revId": "b7cdd9d2e8560be397d56bb8094c74dbd34d9ec2",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f7387d55_407c147f",
        "filename": "internal/pkg/core/openolt_flowmgr.go",
        "patchSetId": 2
      },
      "lineNbr": 2944,
      "author": {
        "id": 1000127
      },
      "writtenOn": "2021-11-23T05:13:40Z",
      "side": 1,
      "message": "Why false? Can you please clarify the expected behavior here? Same comment in other places below.",
      "range": {
        "startLine": 2944,
        "startChar": 89,
        "endLine": 2944,
        "endChar": 94
      },
      "revId": "b7cdd9d2e8560be397d56bb8094c74dbd34d9ec2",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "76448b54_c3e3405a",
        "filename": "internal/pkg/core/openolt_flowmgr.go",
        "patchSetId": 2
      },
      "lineNbr": 2944,
      "author": {
        "id": 1000405
      },
      "writtenOn": "2021-11-23T07:23:41Z",
      "side": 1,
      "message": "If a flow operation fails when sending trap or data-plane flows to the agent (if we receive an error from these methods), the olt flow manager doesn\u0027t send downloadTechProfileRequest to the ONU adapter, and it immediately returns. So, we don\u0027t need to send deleteGemRequest.  We can remove this flag and send this request to the ONU adapter, but it will be an unnecessary method call.",
      "parentUuid": "f7387d55_407c147f",
      "range": {
        "startLine": 2944,
        "startChar": 89,
        "endLine": 2944,
        "endChar": 94
      },
      "revId": "b7cdd9d2e8560be397d56bb8094c74dbd34d9ec2",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9376e9e0_d92467cf",
        "filename": "internal/pkg/core/openolt_flowmgr.go",
        "patchSetId": 2
      },
      "lineNbr": 3485,
      "author": {
        "id": 1000127
      },
      "writtenOn": "2021-11-23T05:13:40Z",
      "side": 1,
      "message": "reverseDirection ?",
      "range": {
        "startLine": 3485,
        "startChar": 5,
        "endLine": 3485,
        "endChar": 14
      },
      "revId": "b7cdd9d2e8560be397d56bb8094c74dbd34d9ec2",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c293ae1c_ef79a11d",
        "filename": "internal/pkg/core/openolt_flowmgr.go",
        "patchSetId": 2
      },
      "lineNbr": 3485,
      "author": {
        "id": 1000405
      },
      "writtenOn": "2021-11-23T07:23:41Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9376e9e0_d92467cf",
      "range": {
        "startLine": 3485,
        "startChar": 5,
        "endLine": 3485,
        "endChar": 14
      },
      "revId": "b7cdd9d2e8560be397d56bb8094c74dbd34d9ec2",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d67d17c2_e1c4b6bd",
        "filename": "internal/pkg/core/openolt_flowmgr.go",
        "patchSetId": 2
      },
      "lineNbr": 3502,
      "author": {
        "id": 1000127
      },
      "writtenOn": "2021-11-23T05:13:40Z",
      "side": 1,
      "message": "Should you also ensure that meter id for the given direction (not reverse direction) is also removed from the kv store?",
      "revId": "b7cdd9d2e8560be397d56bb8094c74dbd34d9ec2",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d2b8fdac_bf8eb4ca",
        "filename": "internal/pkg/core/openolt_flowmgr.go",
        "patchSetId": 2
      },
      "lineNbr": 3502,
      "author": {
        "id": 1000405
      },
      "writtenOn": "2021-11-23T07:23:41Z",
      "side": 1,
      "message": "When we call this method for a specific direction (direction in schedQueue object), it means the related meter is not in the KV store. (If scheduler/queue is created successfully, we add the meter to the KV store - but one of these fails, we call revertTechProfileInstance method immediately before adding to store). So I think I don\u0027t need to check the meter id for the given direction.",
      "parentUuid": "d67d17c2_e1c4b6bd",
      "revId": "b7cdd9d2e8560be397d56bb8094c74dbd34d9ec2",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388"
    }
  ]
}