{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "9d7dc7e6_cfaf3391",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 3
      },
      "lineNbr": 0,
      "author": {
        "id": 1000218
      },
      "writtenOn": "2022-10-24T22:35:01Z",
      "side": 1,
      "message": "hardware test\nfunctional tests",
      "revId": "e514a354374dd551377f0c3e847d48c8421996d3",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f7f43a7c_97113f60",
        "filename": "internal/pkg/core/device_handler.go",
        "patchSetId": 3
      },
      "lineNbr": 216,
      "author": {
        "id": 1000740
      },
      "writtenOn": "2022-10-20T20:09:24Z",
      "side": 1,
      "message": "Just to make it clear, I changed this because it was generating weird etcd keys, e.g: \n\n\"service/voltha/voltha_voltha%!(EXTRA string\u003d/%s/, string\u003dac1c7a89-7ed6-46ea-abad-55c9d7c1bef6)/openolt/{ac1c7a89-7ed6-46ea-abad-55c9d7c1bef6}/heartbeat\"\n\nWith the new path the same key should look like this:\n\"service/voltha/voltha_voltha/openolt/{ac1c7a89-7ed6-46ea-abad-55c9d7c1bef6}/heartbeat\"",
      "revId": "e514a354374dd551377f0c3e847d48c8421996d3",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f036c8c1_f0906d58",
        "filename": "internal/pkg/core/device_handler.go",
        "patchSetId": 3
      },
      "lineNbr": 216,
      "author": {
        "id": 1000740
      },
      "writtenOn": "2022-10-20T20:11:24Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f7f43a7c_97113f60",
      "revId": "e514a354374dd551377f0c3e847d48c8421996d3",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ac2c2eec_3c078c52",
        "filename": "internal/pkg/core/device_handler.go",
        "patchSetId": 3
      },
      "lineNbr": 216,
      "author": {
        "id": 1000218
      },
      "writtenOn": "2022-10-24T17:40:21Z",
      "side": 1,
      "message": "Remove kvStoreDevicePath variable. Use dh.cm.Backend.PathPrefix in the line below directly.",
      "parentUuid": "f036c8c1_f0906d58",
      "revId": "e514a354374dd551377f0c3e847d48c8421996d3",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "020c0461_33a963ea",
        "filename": "internal/pkg/core/device_handler.go",
        "patchSetId": 3
      },
      "lineNbr": 216,
      "author": {
        "id": 1000127
      },
      "writtenOn": "2022-10-25T03:34:45Z",
      "side": 1,
      "message": "Just to be clear, is the `dh.cm.Backend.PathPrefix` having the device-id? So is it basically this -\u003e `service/voltha/voltha_voltha/openolt/{ac1c7a89-7ed6-46ea-abad-55c9d7c1bef6}`",
      "parentUuid": "ac2c2eec_3c078c52",
      "revId": "e514a354374dd551377f0c3e847d48c8421996d3",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "67470683_fe34e484",
        "filename": "internal/pkg/core/device_handler.go",
        "patchSetId": 3
      },
      "lineNbr": 2218,
      "author": {
        "id": 1000127
      },
      "writtenOn": "2022-10-25T03:34:45Z",
      "side": 1,
      "message": "Basically we just generate the error on kafka if olt reboot fails and not really return error to vcore - is that the case? I think this fails only when the OLT can\u0027t be reached. Otherwise the operation is pretty straighforward. At the olt (at least the openolt) it just issues the reboot system command which never fails.",
      "revId": "e514a354374dd551377f0c3e847d48c8421996d3",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "154eef9f_7ec658b0",
        "filename": "internal/pkg/core/device_handler.go",
        "patchSetId": 3
      },
      "lineNbr": 2222,
      "author": {
        "id": 1000127
      },
      "writtenOn": "2022-10-25T03:34:45Z",
      "side": 1,
      "message": "What are we trying to do here? A new error object is created, but not assigned to anything. Perhaps, if you only need to generate an event on kafka with oltRebootFailedEvent (ignore any error in the process) and not do anything else?",
      "range": {
        "startLine": 2221,
        "startChar": 0,
        "endLine": 2222,
        "endChar": 71
      },
      "revId": "e514a354374dd551377f0c3e847d48c8421996d3",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2f98588a_63d00747",
        "filename": "internal/pkg/core/device_handler.go",
        "patchSetId": 3
      },
      "lineNbr": 2226,
      "author": {
        "id": 1000127
      },
      "writtenOn": "2022-10-25T03:34:45Z",
      "side": 1,
      "message": "Same comment here. Nothing is being done with the error object. You may need this line at all in that case.",
      "range": {
        "startLine": 2225,
        "startChar": 0,
        "endLine": 2226,
        "endChar": 25
      },
      "revId": "e514a354374dd551377f0c3e847d48c8421996d3",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "acb63451_85fcef84",
        "filename": "internal/pkg/core/device_handler.go",
        "patchSetId": 3
      },
      "lineNbr": 2272,
      "author": {
        "id": 1000740
      },
      "writtenOn": "2022-10-20T20:09:24Z",
      "side": 1,
      "message": "It doesn\u0027t seem to make sense to instantiate a new kv-store instance to do this final cleanup.\n\nLet me know if I didn\u0027t consider something.",
      "revId": "e514a354374dd551377f0c3e847d48c8421996d3",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0ec5330d_08fdff67",
        "filename": "internal/pkg/core/device_handler.go",
        "patchSetId": 3
      },
      "lineNbr": 2272,
      "author": {
        "id": 1000740
      },
      "writtenOn": "2022-10-20T20:11:24Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "acb63451_85fcef84",
      "revId": "e514a354374dd551377f0c3e847d48c8421996d3",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2483cd5b_032cd005",
        "filename": "internal/pkg/core/openolt.go",
        "patchSetId": 3
      },
      "lineNbr": 246,
      "author": {
        "id": 1000218
      },
      "writtenOn": "2022-10-24T17:40:21Z",
      "side": 1,
      "message": "I guess we need to remove the Map entry here before returning. (call oo.deleteDeviceHandlerToMap). Even some garbage data still remained in KV, we no more serve this device in volt-adapter.",
      "range": {
        "startLine": 246,
        "startChar": 0,
        "endLine": 246,
        "endChar": 18
      },
      "revId": "e514a354374dd551377f0c3e847d48c8421996d3",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "07907060_d6422130",
        "filename": "internal/pkg/core/openolt.go",
        "patchSetId": 3
      },
      "lineNbr": 246,
      "author": {
        "id": 1000127
      },
      "writtenOn": "2022-10-25T03:34:45Z",
      "side": 1,
      "message": "Deleting the device no matter what may be the right thing to do - but not 100% sure. We may need to manually delete or have some DB eviction policy at system level (outside voltha) that manually scavenges stale date and removes them in these cases where the delete device fails (often very rarely though).\nThe DB eviction policy for stale data could be as simple as removing DB entries for any device-id that do no exist in the system. Just periodically run this (like a cron job).",
      "parentUuid": "2483cd5b_032cd005",
      "range": {
        "startLine": 246,
        "startChar": 0,
        "endLine": 246,
        "endChar": 18
      },
      "revId": "e514a354374dd551377f0c3e847d48c8421996d3",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e171d429_f33cd040",
        "filename": "internal/pkg/core/openolt_eventmgr.go",
        "patchSetId": 3
      },
      "lineNbr": 345,
      "author": {
        "id": 1000218
      },
      "writtenOn": "2022-10-24T17:40:21Z",
      "side": 1,
      "message": "adding a fake connect state here doesn\u0027t make sense. We may send the reason why device rebooted here, so indicate the user that the reboot operation done because of a deleteDevice request. You may add a reason string to function\u0027s signature and add it to context instead, like below.\n func (em *OpenOltEventMgr) oltRebootFailedEvent(ctx context.Context, deviceID string, reason string, raisedTs int64) error {\nde :\u003d voltha.DeviceEvent{\n\t\tContext:         map[string]string{ContextOltRebootReason: reason},",
      "range": {
        "startLine": 345,
        "startChar": 61,
        "endLine": 345,
        "endChar": 79
      },
      "revId": "e514a354374dd551377f0c3e847d48c8421996d3",
      "serverId": "2a2bfe1b-c5c2-48ed-9ac8-16438ab24388"
    }
  ]
}